<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="I noticed that my Internet was acting strangely: whenever I visited a web page, my browser would hang for a good second or two before it started loading anything. Zoom calls worked without a problem for school, so this tipped me off that something was wrong with the DNS lookup or the handshake.
Sure enough, I popped open my Pi-Hole admin console, and was greeted with this:
The green number in the Total Queries box would jump by 10, 20, or sometimes even 100 every second.">
<meta name="theme-color" content="#353a40">
<meta name="color-scheme" content="dark"><meta property="og:title" content="Dr. Loopback, Or: How I Learned to Stop DOSing Myself and Love the Pi-Hole" />
<meta property="og:description" content="I noticed that my Internet was acting strangely: whenever I visited a web page, my browser would hang for a good second or two before it started loading anything. Zoom calls worked without a problem for school, so this tipped me off that something was wrong with the DNS lookup or the handshake.
Sure enough, I popped open my Pi-Hole admin console, and was greeted with this:
The green number in the Total Queries box would jump by 10, 20, or sometimes even 100 every second." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://lambdaland.org/posts/2020-12-11-raspberry-pi-dos/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-11T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-12-11T00:00:00+00:00" />
<title>Dr. Loopback, Or: How I Learned to Stop DOSing Myself and Love the Pi-Hole | Lambda Land</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.030071c6dd0cc032c884688a087364d6279d4d280966698df024e02a298e03af.css" integrity="sha256-AwBxxt0MwDLIhGiKCHNk1iedTSgJZmmN8CTgKimOA68=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.f7ee37f909e481d3c84c8e05e1674a9db94582e8270d7c9397de7a63f3d87e05.js" integrity="sha256-9&#43;43&#43;QnkgdPITI4F4WdKnblFgugnDXyTl956Y/PYfgU=" crossorigin="anonymous"></script>

  <script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/img/lambda_logo.png" alt="Logo" /><span>Lambda Land</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>







  
<ul>
  
  <li>
    <a href="/resume.pdf" target="_blank" rel="noopener">
        Résumé / CV
      </a>
  </li>
  
</ul>







  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/about/" class="">About Me</a>
  

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="/posts/" >
        Technical Blog
      </a>
  </li>
  
  <li>
    <a href="/posts/personal/" >
        Personal Blog
      </a>
  </li>
  
  <li>
    <a href="#" target="_blank" rel="noopener">
         
      </a>
  </li>
  
  <li>
    <a href="https://sr.ht/~ashton314" target="_blank" rel="noopener">
        SourceHut
      </a>
  </li>
  
  <li>
    <a href="https://github.com/ashton314" target="_blank" rel="noopener">
        GitHub
      </a>
  </li>
  
  <li>
    <a href="/#contact" target="_blank" rel="noopener">
        Contact
      </a>
  </li>
  
  <li>
    <a href="/ashton_wiersdorf.pgp" target="_blank" rel="noopener">
        PGP Key
      </a>
  </li>
  
  <li>
    <a href="/index.xml" target="_blank" rel="noopener">
        RSS Feed
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Dr. Loopback, Or: How I Learned to Stop DOSing Myself and Love the Pi-Hole</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents"></nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown">
  <h1>
    <a href="/posts/2020-12-11-raspberry-pi-dos/">Dr. Loopback, Or: How I Learned to Stop DOSing Myself and Love the Pi-Hole</a>
  </h1>
  
  <h5>11 Dec 2020</h5>



  

  
  <div>
    
      <a href="/tags/network/">network</a>, 
      <a href="/tags/pi-hole/">pi-hole</a>, 
      <a href="/tags/mistakes/">mistakes</a>
  </div>
  



<p>I noticed that my Internet was acting strangely: whenever I visited a web page, my browser would hang for a good second or two before it started loading anything. Zoom calls worked without a problem for school, so this tipped me off that something was wrong with the DNS lookup or the handshake.</p>
<p>Sure enough, I popped open my 
  <a href="https://pi-hole.net/">Pi-Hole</a> admin console, and was greeted with this:</p>
<p>
  <img src="/img/pi_hole_before.png" alt="Pi-Hole Admin Console" /></p>
<p>The green number in the <code>Total Queries</code> box would jump by 10, 20, or sometimes even 100 every second.</p>
<p>I tried turning off, disconnecting, and rebooting my various computers and devices to see if it was just some rogue process messing everything up. No change. I rebooted my router. No change. I updated and restarted the Pi-Hole. Still no change.</p>
<p>I noticed that a <em>lot</em> of requests to the domain <code>lb._dns-sd._udp.0.0.0.10.in-addr.arpa</code>. I did a web search and found 
  <a href="https://discourse.pi-hole.net/t/many-requests-to-lb-dns-sd-udp-0-1-168-192-in-addr-arpa/18241">a single post on a forum</a> that suggested turning off conditional forwarding on the Pi-Hole.</p>
<p>I went into admin settings, turned off conditional forwarding, and was rewarded with this:</p>
<p>
  <img src="/img/pi_hole_after.png" alt="Pi-Hole Admin Console" /></p>
<p>Now my pi isn&rsquo;t overloaded with DNS requests, and my Internet is as snappy as it used to be.</p>
<p>What happened, I think, was that a device on my network would try and lookup some name. The router would forward this request to the pi, which would then forward it back to the router, which would then send it back to the pi, etc. Boom. Infinite loop, and all my DNS requests got bogged down.</p>
<p>I&rsquo;m not very good with networking; that&rsquo;s probably my biggest weakness. I learned a thing today, though!</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        <script src="/js/count.js"></script>
<div class="copyright-footer">
  <small>© Ashton Wiersdorf 2022</small>
</div>

      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents"></nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












