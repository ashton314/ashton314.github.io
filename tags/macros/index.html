<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#eceff4">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#121519">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://lambdaland.org/tags/macros/">
  <meta property="og:site_name" content="Lambda Land">
  <meta property="og:title" content="Macros">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">
<title>Macros | Lambda Land</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" >
<link rel="stylesheet" href="/book.min.ffe89edf7394f7f75b346b3239bec5b790a2d4daaa85a3a610d392c76919aac1.css" integrity="sha256-/&#43;ie33OU9/dbNGsyOb7Ft5Ci1NqqhaOmENOSx2kZqsE=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.9baf4eb44c600be29550a301b6060eb5b5fda63a1d7fbbff7f10fbc85d13952b.js" integrity="sha256-m69OtExgC&#43;KVUKMBtgYOtbX9pjodf7v/fxD7yF0TlSs=" crossorigin="anonymous"></script>

  <script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk=" crossorigin="anonymous"></script>
<link rel="alternate" type="application/rss+xml" href="https://lambdaland.org/tags/macros/index.xml" title="Lambda Land" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/img/lambda_logo.png" alt="Logo" /><span>Lambda Land</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/about/" class="">About</a>
  

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="/posts/"  >
        Technical Blog
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 

        
        <hr />
        <div class="my-book-toc">
          <div class="my-book-toc-content">
            
  <nav class="post-metadata">
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/categories/featured/">Featured</a>
          <span>10</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/tutorials/">Tutorials</a>
          <span>9</span>
        </li>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/tags/programming/">Programming</a>
          <span>17</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/racket/">Racket</a>
          <span>5</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/privacy/">Privacy</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/emacs/">Emacs</a>
          <span>11</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/cryptography/">Cryptography</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/happy-things/">Happy-Things</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/programming-languages/">Programming-Languages</a>
          <span>17</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/research/">Research</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/academics/">Academics</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/tools/">Tools</a>
          <span>9</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/meta/">Meta</a>
          <span>5</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/choreography/">Choreography</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/computer-science/">Computer-Science</a>
          <span>11</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/macros/">Macros</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/type-checking/">Type-Checking</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/career/">Career</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/education/">Education</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/personal/">Personal</a>
          <span>8</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/school/">School</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/hiking/">Hiking</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/email/">Email</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/family/">Family</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/management/">Management</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/typography/">Typography</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/technology/">Technology</a>
          <span>7</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/til/">Til</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/design/">Design</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/faith/">Faith</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/org-mode/">Org-Mode</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/health/">Health</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/books/">Books</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/cfa/">Cfa</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/raspberry-pi/">Raspberry-Pi</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/freebsd/">Freebsd</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/book-review/">Book-Review</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/writing/">Writing</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>

 
          </div>
        </div>
        
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Macros</strong>

  
</div>


  
  <aside class="hidden clearfix">
    
  <nav class="post-metadata">
  <ul>
  
    
    <li class="book-section-flat">
      <strong>Categories</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/categories/featured/">Featured</a>
          <span>10</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/categories/tutorials/">Tutorials</a>
          <span>9</span>
        </li>
      
      </ul>
    </li>
    
  
    
    <li class="book-section-flat">
      <strong>Tags</strong>
      <ul>
      
        <li class="flex justify-between">
          <a href="/tags/programming/">Programming</a>
          <span>17</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/racket/">Racket</a>
          <span>5</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/privacy/">Privacy</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/emacs/">Emacs</a>
          <span>11</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/cryptography/">Cryptography</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/happy-things/">Happy-Things</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/programming-languages/">Programming-Languages</a>
          <span>17</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/research/">Research</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/academics/">Academics</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/tools/">Tools</a>
          <span>9</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/meta/">Meta</a>
          <span>5</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/choreography/">Choreography</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/computer-science/">Computer-Science</a>
          <span>11</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/macros/">Macros</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/type-checking/">Type-Checking</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/career/">Career</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/education/">Education</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/personal/">Personal</a>
          <span>8</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/school/">School</a>
          <span>4</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/hiking/">Hiking</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/email/">Email</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/family/">Family</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/management/">Management</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/typography/">Typography</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/technology/">Technology</a>
          <span>7</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/til/">Til</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/design/">Design</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/faith/">Faith</a>
          <span>3</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/org-mode/">Org-Mode</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/health/">Health</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/books/">Books</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/cfa/">Cfa</a>
          <span>1</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/raspberry-pi/">Raspberry-Pi</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/freebsd/">Freebsd</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/book-review/">Book-Review</a>
          <span>2</span>
        </li>
      
        <li class="flex justify-between">
          <a href="/tags/writing/">Writing</a>
          <span>1</span>
        </li>
      
      </ul>
    </li>
    
  
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/2024-05-01_definitely_not_about_monads/">Boilerplate Busting in Functional Languages</a>
    </h2>
    
  <h5>6 May 2024</h5>



  
  <div class="post-metadata-categories">
    
      <a href="/categories/featured/">Featured</a>
  </div>
  

  
  <div class="post-metadata-tags">
    
      <a href="/tags/programming-languages/">Programming-Languages</a>, 
      <a href="/tags/macros/">Macros</a>, 
      <a href="/tags/programming/">Programming</a>
  </div>
  




    <p><p>This is the story of how I solved a problem (ugly, cumbersome boilerplate code) that I ran into while writing a program in a functional language (Elixir). Functional programming languages often pride themselves on expressiveness and elegance; but occasionally they are not amenable to the most obvious solutions to the problems we wish to solve. In this case, the simplest solution to my problem would have been to have a global mutable variable. But no one likes those.</p>
        <a href="/posts/2024-05-01_definitely_not_about_monads/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/2023-10-17_fearless_macros/">Towards Fearless Macros</a>
    </h2>
    
  <h5>13 Nov 2023</h5>



  
  <div class="post-metadata-categories">
    
      <a href="/categories/featured/">Featured</a>
  </div>
  

  
  <div class="post-metadata-tags">
    
      <a href="/tags/programming-languages/">Programming-Languages</a>, 
      <a href="/tags/macros/">Macros</a>
  </div>
  




    <p><p>Macros are tricky beasts. Most languages—if they have macros at all—usually include a huge &ldquo;here there be dragons&rdquo; warning to warn curious would-be macro programmers of the dangers that lurk ahead.</p>
<p>What is it about macros that makes them so dangerous and unwieldy? That&rsquo;s difficult to answer in general: there are many different macro systems with varying degrees of ease-of-use. Moreover, making macros easy to use safely is an open area of research—most languages that have macros don&rsquo;t have features necessary to implement macros safely. Hence, most people steer clear of macros.</p>
        <a href="/posts/2023-10-17_fearless_macros/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/2023-08-14_types_with_macros/">Implementing Type Systems as Macros</a>
    </h2>
    
  <h5>14 Aug 2023</h5>



  
  <div class="post-metadata-categories">
    
      <a href="/categories/featured/">Featured</a>
  </div>
  

  
  <div class="post-metadata-tags">
    
      <a href="/tags/computer-science/">Computer-Science</a>, 
      <a href="/tags/programming-languages/">Programming-Languages</a>, 
      <a href="/tags/macros/">Macros</a>, 
      <a href="/tags/type-checking/">Type-Checking</a>
  </div>
  




    <p><p>There&rsquo;s a neat paper <em>Type Systems as Macros</em> by Chang, Knauth, and Greenman [<a href="#citeproc_bib_item_1">1</a>] that describes how to implement a typed language using an untyped host language and macro expansion. The paper is neat, but I found the code hard to follow—the paper uses a compact notation that&rsquo;s convenient for print, but not so much for reproducing on one&rsquo;s own. This post is my attempt to implement and explain in more accessible terms what&rsquo;s presented in the paper.</p>
        <a href="/posts/2023-08-14_types_with_macros/">...</a>
      
    </p>
  </article>
  
  <article class="markdown book-post">
    <h2>
      <a href="/posts/2023-05-19_racket_macros/">Writing Racket Macros: define-syntax and phases</a>
    </h2>
    
  <h5>19 May 2023</h5>



  
  <div class="post-metadata-categories">
    
      <a href="/categories/tutorials/">Tutorials</a>
  </div>
  

  
  <div class="post-metadata-tags">
    
      <a href="/tags/computer-science/">Computer-Science</a>, 
      <a href="/tags/macros/">Macros</a>, 
      <a href="/tags/racket/">Racket</a>
  </div>
  




    <p><p>There are a bunch of different ways of writing a macro in Racket. There are also some tricky things around phases to keep in mind. This is to help me keep them all straight.</p>
<h2 id="3-plus-1-ways-to-make-a-macro">
  3+1 ways to make a macro
  <a class="anchor" href="#3-plus-1-ways-to-make-a-macro">#</a>
</h2>
<p>This form:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-racket" data-lang="racket"><span style="display:flex;"><span><span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">define-syntax-rule</span> <span style="color:#eceff4">(</span>foo args <span style="color:#81a1c1;font-weight:bold">...</span><span style="color:#eceff4">)</span> <span style="color:#eceff4">(</span>use args <span style="color:#81a1c1;font-weight:bold">...</span><span style="color:#eceff4">))</span><span style="color:#bf616a">
</span></span></span></code></pre></div><p>is equivalent to:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-racket" data-lang="racket"><span style="display:flex;"><span><span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">define-syntax</span> foo
</span></span><span style="display:flex;"><span>  <span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">syntax-rules</span> <span style="color:#eceff4">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">([</span>foo args <span style="color:#81a1c1;font-weight:bold">...</span><span style="color:#eceff4">]</span> <span style="color:#eceff4">(</span>use args <span style="color:#81a1c1;font-weight:bold">...</span><span style="color:#eceff4">))))</span><span style="color:#bf616a">
</span></span></span></code></pre></div><p>Which, is in turn equivalent to:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-racket" data-lang="racket"><span style="display:flex;"><span><span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">define-syntax</span> foo
</span></span><span style="display:flex;"><span>  <span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">λ</span> <span style="color:#eceff4">(</span>stx<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">syntax-case</span> stx <span style="color:#eceff4">()</span>
</span></span><span style="display:flex;"><span>      <span style="color:#eceff4">[(</span>gensymed-foo args <span style="color:#81a1c1;font-weight:bold">...</span><span style="color:#eceff4">)</span> <span style="color:#81a1c1">#&#39;</span><span style="color:#eceff4">(</span>use args <span style="color:#81a1c1;font-weight:bold">...</span><span style="color:#eceff4">)])))</span>  <span style="color:#616e87;font-style:italic">; gensymed-foo is like foo but doesn&#39;t match in the template</span>
</span></span></code></pre></div><p>because <code>syntax-rules</code> expands to <code>syntax-case</code> with some fancy wrapping around it.</p>
        <a href="/posts/2023-05-19_racket_macros/">...</a>
      
    </p>
  </article>
  

  
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        <script async src="/js/count.js"></script>
<script async src="/js/menu_fixer.js"></script>
<script data-goatcounter="https://boink.lambdaland.org/count" async src="//boink.lambdaland.org/count.js"></script>
<a rel="me" style="display: none" href="https://fosstodon.org/@wiersdorf">Mastodon</a>
<div class="copyright-footer">
  <small>© Ashton Wiersdorf 2024</small>
</div>

      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

  </main>

  
</body>
</html>












